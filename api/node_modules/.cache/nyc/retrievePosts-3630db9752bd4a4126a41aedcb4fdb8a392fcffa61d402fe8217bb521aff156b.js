function cov_lpf78mx9q(){var path="/Users/macbook/workspace/isdi-parttime-202303/staff/rodrigo-castro/fullstack/api/logic/post/retrievePosts.js";var hash="ca80544fc0dba8920095a0c44f3789a464ae1494";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/macbook/workspace/isdi-parttime-202303/staff/rodrigo-castro/fullstack/api/logic/post/retrievePosts.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:34}},"1":{start:{line:2,column:39},end:{line:2,column:53}},"2":{start:{line:4,column:0},end:{line:55,column:1}},"3":{start:{line:6,column:4},end:{line:6,column:22}},"4":{start:{line:8,column:4},end:{line:54,column:6}},"5":{start:{line:9,column:8},end:{line:13,column:9}},"6":{start:{line:10,column:12},end:{line:10,column:27}},"7":{start:{line:12,column:12},end:{line:12,column:18}},"8":{start:{line:15,column:22},end:{line:15,column:43}},"9":{start:{line:17,column:21},end:{line:17,column:59}},"10":{start:{line:17,column:40},end:{line:17,column:58}},"11":{start:{line:19,column:8},end:{line:23,column:9}},"12":{start:{line:20,column:12},end:{line:20,column:67}},"13":{start:{line:22,column:12},end:{line:22,column:18}},"14":{start:{line:25,column:8},end:{line:53,column:10}},"15":{start:{line:26,column:12},end:{line:30,column:13}},"16":{start:{line:27,column:16},end:{line:27,column:31}},"17":{start:{line:29,column:16},end:{line:29,column:22}},"18":{start:{line:32,column:26},end:{line:32,column:47}},"19":{start:{line:34,column:12},end:{line:44,column:14}},"20":{start:{line:35,column:31},end:{line:35,column:74}},"21":{start:{line:35,column:50},end:{line:35,column:73}},"22":{start:{line:37,column:16},end:{line:41,column:17}},"23":{start:{line:43,column:16},end:{line:43,column:62}},"24":{start:{line:46,column:34},end:{line:46,column:36}},"25":{start:{line:48,column:12},end:{line:50,column:13}},"26":{start:{line:48,column:25},end:{line:48,column:41}},"27":{start:{line:49,column:16},end:{line:49,column:44}},"28":{start:{line:52,column:12},end:{line:52,column:41}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:39},end:{line:55,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:58},end:{line:8,column:59}},loc:{start:{line:8,column:80},end:{line:54,column:5}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:32},end:{line:17,column:33}},loc:{start:{line:17,column:40},end:{line:17,column:58}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:25,column:62},end:{line:25,column:63}},loc:{start:{line:25,column:84},end:{line:53,column:9}},line:25},"4":{name:"(anonymous_4)",decl:{start:{line:34,column:26},end:{line:34,column:27}},loc:{start:{line:34,column:34},end:{line:44,column:13}},line:34},"5":{name:"(anonymous_5)",decl:{start:{line:35,column:42},end:{line:35,column:43}},loc:{start:{line:35,column:50},end:{line:35,column:73}},line:35}},branchMap:{"0":{loc:{start:{line:9,column:8},end:{line:13,column:9}},type:"if",locations:[{start:{line:9,column:8},end:{line:13,column:9}},{start:{line:9,column:8},end:{line:13,column:9}}],line:9},"1":{loc:{start:{line:19,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:19,column:8},end:{line:23,column:9}},{start:{line:19,column:8},end:{line:23,column:9}}],line:19},"2":{loc:{start:{line:26,column:12},end:{line:30,column:13}},type:"if",locations:[{start:{line:26,column:12},end:{line:30,column:13}},{start:{line:26,column:12},end:{line:30,column:13}}],line:26}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca80544fc0dba8920095a0c44f3789a464ae1494"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_lpf78mx9q=function(){return actualCoverage;};}return actualCoverage;}cov_lpf78mx9q();const{readFile}=(cov_lpf78mx9q().s[0]++,require('fs'));const{validators:{validateId}}=(cov_lpf78mx9q().s[1]++,require('com'));cov_lpf78mx9q().s[2]++;module.exports=(userId,callback)=>{cov_lpf78mx9q().f[0]++;cov_lpf78mx9q().s[3]++;validateId(userId);cov_lpf78mx9q().s[4]++;readFile(`${process.env.DB_PATH}/users.json`,'utf8',(error,usersJson)=>{cov_lpf78mx9q().f[1]++;cov_lpf78mx9q().s[5]++;if(error){cov_lpf78mx9q().b[0][0]++;cov_lpf78mx9q().s[6]++;callback(error);cov_lpf78mx9q().s[7]++;return;}else{cov_lpf78mx9q().b[0][1]++;}const users=(cov_lpf78mx9q().s[8]++,JSON.parse(usersJson));const user=(cov_lpf78mx9q().s[9]++,users.find(user=>{cov_lpf78mx9q().f[2]++;cov_lpf78mx9q().s[10]++;return user.id===userId;}));cov_lpf78mx9q().s[11]++;if(!user){cov_lpf78mx9q().b[1][0]++;cov_lpf78mx9q().s[12]++;callback(new Error(`user with id ${userId} not found`));cov_lpf78mx9q().s[13]++;return;}else{cov_lpf78mx9q().b[1][1]++;}cov_lpf78mx9q().s[14]++;readFile(`${process.env.DB_PATH}/posts.json`,'utf8',(error,postsJson)=>{cov_lpf78mx9q().f[3]++;cov_lpf78mx9q().s[15]++;if(error){cov_lpf78mx9q().b[2][0]++;cov_lpf78mx9q().s[16]++;callback(error);cov_lpf78mx9q().s[17]++;return;}else{cov_lpf78mx9q().b[2][1]++;}const posts=(cov_lpf78mx9q().s[18]++,JSON.parse(postsJson));cov_lpf78mx9q().s[19]++;posts.forEach(post=>{cov_lpf78mx9q().f[4]++;const author=(cov_lpf78mx9q().s[20]++,users.find(user=>{cov_lpf78mx9q().f[5]++;cov_lpf78mx9q().s[21]++;return user.id===post.author;}));cov_lpf78mx9q().s[22]++;post.author={authorId:author.id,name:author.name,avatar:author.avatar};cov_lpf78mx9q().s[23]++;post.isFav=user.savedPosts.includes(post.id);});const reversedPosts=(cov_lpf78mx9q().s[24]++,[]);cov_lpf78mx9q().s[25]++;for(let i=(cov_lpf78mx9q().s[26]++,posts.length-1);i>=0;i--){cov_lpf78mx9q().s[27]++;reversedPosts.push(posts[i]);}cov_lpf78mx9q().s[28]++;callback(null,reversedPosts);});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfbHBmNzhteDlxIiwiYWN0dWFsQ292ZXJhZ2UiLCJyZWFkRmlsZSIsInMiLCJyZXF1aXJlIiwidmFsaWRhdG9ycyIsInZhbGlkYXRlSWQiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlcklkIiwiY2FsbGJhY2siLCJmIiwicHJvY2VzcyIsImVudiIsIkRCX1BBVEgiLCJlcnJvciIsInVzZXJzSnNvbiIsImIiLCJ1c2VycyIsIkpTT04iLCJwYXJzZSIsInVzZXIiLCJmaW5kIiwiaWQiLCJFcnJvciIsInBvc3RzSnNvbiIsInBvc3RzIiwiZm9yRWFjaCIsInBvc3QiLCJhdXRob3IiLCJhdXRob3JJZCIsIm5hbWUiLCJhdmF0YXIiLCJpc0ZhdiIsInNhdmVkUG9zdHMiLCJpbmNsdWRlcyIsInJldmVyc2VkUG9zdHMiLCJpIiwibGVuZ3RoIiwicHVzaCJdLCJzb3VyY2VzIjpbInJldHJpZXZlUG9zdHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyByZWFkRmlsZSB9ID0gcmVxdWlyZSgnZnMnKVxuY29uc3QgeyB2YWxpZGF0b3JzOiB7IHZhbGlkYXRlSWQgfSB9ID0gcmVxdWlyZSgnY29tJylcblxubW9kdWxlLmV4cG9ydHMgPSAodXNlcklkLCBjYWxsYmFjaykgPT4ge1xuXG4gICAgdmFsaWRhdGVJZCh1c2VySWQpXG5cbiAgICByZWFkRmlsZShgJHtwcm9jZXNzLmVudi5EQl9QQVRIfS91c2Vycy5qc29uYCwgJ3V0ZjgnLCAoZXJyb3IsIHVzZXJzSnNvbikgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKVxuXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXJzID0gSlNPTi5wYXJzZSh1c2Vyc0pzb24pXG5cbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQodXNlciA9PiB1c2VyLmlkID09PSB1c2VySWQpXG5cbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoYHVzZXIgd2l0aCBpZCAke3VzZXJJZH0gbm90IGZvdW5kYCkpXG5cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgcmVhZEZpbGUoYCR7cHJvY2Vzcy5lbnYuREJfUEFUSH0vcG9zdHMuanNvbmAsICd1dGY4JywgKGVycm9yLCBwb3N0c0pzb24pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBvc3RzID0gSlNPTi5wYXJzZShwb3N0c0pzb24pXG5cbiAgICAgICAgICAgIHBvc3RzLmZvckVhY2gocG9zdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yID0gdXNlcnMuZmluZCh1c2VyID0+IHVzZXIuaWQgPT09IHBvc3QuYXV0aG9yKVxuXG4gICAgICAgICAgICAgICAgcG9zdC5hdXRob3IgPSB7XG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcklkOiBhdXRob3IuaWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGF1dGhvci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBhdmF0YXI6IGF1dGhvci5hdmF0YXJcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBwb3N0LmlzRmF2ID0gdXNlci5zYXZlZFBvc3RzLmluY2x1ZGVzKHBvc3QuaWQpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBjb25zdCByZXZlcnNlZFBvc3RzID0gW11cblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBvc3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgcmV2ZXJzZWRQb3N0cy5wdXNoKHBvc3RzW2ldKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBj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